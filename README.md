# Obsidian 记账管理插件

基于 Obsidian 日记文件的智能记账管理插件，能够自动识别和统计您在日记中的记账记录。

## 功能特点

- 🔍 **自动识别记账记录**：从日记文件中自动解析记账信息
- 📊 **统计分析**：提供收支统计、分类统计和时间范围查询
- 🏷️ **分类管理**：支持自定义关键词和分类映射
- 📅 **时间筛选**：可按日期范围查看记账记录
- 💰 **收支管理**：区分收入和支出，计算结余
- 🎨 **美观界面**：类似日历插件的现代化界面设计

## 记账格式

在您的日记文件中，使用以下格式记录账目：

```
#关键词 金额 备注说明
```

### 示例：

```markdown
# 2024年1月10日

早上买早餐
#cy 15.5 豆浆油条

中午吃饭
#cy 45 麻辣烫

打车回家  
#jt 28 滴滴打车

收到工资
#sr 8500 1月份工资
```

## 配置说明

插件使用 `config.json` 文件进行配置：

```json
{
    "categories": {
        "cy": "餐饮",
        "jt": "交通",
        "yl": "娱乐", 
        "gw": "购物",
        "yl": "医疗",
        "jy": "教育",
        "fz": "房租",
        "qt": "其他",
        "sr": "收入"
    },
    "expenseEmoji": "#",
    "journalsPath": "journals"
}
```

### 配置项说明：

- **categories**: 关键词与分类的映射关系
  - `key`: 记账时使用的关键词
  - `value`: 显示的中文分类名称
  - `sr`: 特殊关键词，表示收入（其他为支出）
- **expenseEmoji**: 记账标识符（默认为 #）
- **journalsPath**: 日记文件存放路径（默认为 journals）

## 使用方法

### 1. 安装插件

将插件文件放入 Obsidian 插件目录并启用。

### 2. 配置分类

根据个人需求修改 `config.json` 中的分类设置。

### 3. 记录账目

在日记文件中按格式记录收支：
- 使用 `#` 开头标识记账记录
- 紧跟关键词（如 cy、jt 等）
- 然后是金额（支持小数）
- 最后是备注说明

### 4. 查看统计

- 点击侧边栏的计算器图标打开记账管理界面
- 使用"选择日期范围"按钮筛选特定时间段
- 查看收支统计、分类统计和详细记录

## 界面功能

### 统计概览
- **总收入**：选定时间范围内的收入总额
- **总支出**：选定时间范围内的支出总额  
- **结余**：收入减去支出的余额

### 分类统计
- 按支出金额排序显示各分类统计
- 显示每个分类的总金额和记录数量

### 记录列表
- 按日期分组显示所有记账记录
- 支持右键查看原始日记文件
- 显示每日收支汇总

## 快捷操作

- **Ctrl/Cmd + P** → 搜索"记账管理"快速打开
- **右键记录** → 查看原文跳转到对应日记
- **刷新数据** → 重新扫描所有日记文件

## 注意事项

1. 确保日记文件存放在配置的 `journalsPath` 目录下
2. 记账格式必须严格按照 `#关键词 金额 备注` 的格式
3. 金额支持小数点，但不要包含货币符号
4. 关键词必须在配置文件中定义才能被正确识别
5. 使用 `sr` 关键词标识收入，其他关键词默认为支出

## 自定义扩展

您可以根据需要：
- 添加新的分类关键词到 `config.json`
- 修改记账标识符（默认为 #）
- 调整日记文件路径
- 自定义界面样式（修改 `styles.css`）

## 技术支持

如有问题或建议，请联系开发者或提交 Issue。

---

💡 **提示**：建议养成每日记账的好习惯，这样可以更好地了解自己的消费情况！